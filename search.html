<!doctype html>
<html lang="es">

<body>

<!-- dropdown -->
<div class="col-md-12 col-sm-6">
    <div class="btn-group btn-block">
        <button class="btn btn-default btn-block dropdown-toggle" type="button" data-toggle="dropdown">
              <span>
                buscar por
            </span>
            <span class="pull-right"><span class="caret"></span></span>
        </button>

        <ul class="dropdown-menu btn-block">
            <li><a href="#">todos</a></li>
            <li><a href="#">nombre</a></li>
            <li><a href="#">código</a></li>
            <li><a href="#">ip</a></li>
            <li><a href="#">dirección</a></li>
            <li><a href="#">teléfono</a></li>
        </ul>
    </div>
</div>

    <!--input de búsqueda-->
    <div class="col-md-12 col-sm-6">
        <form>
            <div class="input-group">
                <input type="text" class="form-control" title="Busqueda" placeholder="ingrese búsqueda" id="inp_search_box">
                <span class="input-group-btn"><button class="btn btn-default" type="button" id="btn_search_box">></button></span>
            </div>
        </form>
    </div>

    <br/>

    <!-- Los resultados se muestran acá -->
    <div class="container" id="results">

    </div>

</div>


<script>
    $("#inp_search_box").focus();

    $("#code_selection").on('change',function() {

        //reemplazo de codigo en la string
        if (($("#inp_search_box").val().charAt(0) != ':')||(($("#inp_search_box").val().charAt(0) == ''))) {
            $("#inp_search_box").val(":" + $("#code_selection").val() + " " + $("#inp_search_box").val());
        } else {
            $("#inp_search_box").val($("#inp_search_box").val().substring(4));
            $("#inp_search_box").val(":" + $("#code_selection").val() + " " + $("#inp_search_box").val());
        }

        $("#inp_search_box").focus();

    });

    function sendQuery(){

        var searchString = $("#inp_search_box").val();

        if(searchString!=''){


            $.get("search.php", {query:searchString},function(external){
                $("#results").html(external);
            });
        }else{

            $("#results").html("<p class='text-center bg-danger'>no se ingresaron datos</p>");

            $("#results").fadeOut(0).delay(100).fadeIn(100);
        }
    }

    $("#btn_search_box").click(function(){sendQuery()});

    $(document).keypress(function(event){
        if(event.which == 13){
            console.log("enter apretado");
            sendQuery();
        }
    });


</script>
</body>